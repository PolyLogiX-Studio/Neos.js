<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>API/MessageManager.js - Documentation</title>
    
    
    
    
    
    <meta property="og:title" content=""/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content=""/>
    
    <meta property="og:url" content=""/>
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav class="wrap">
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    <h2><a href="index.html">Home</a></h2><h2><a href="https://github.com/PolyLogiX-Studio/Neos.js" target="_blank" class="menu-item" id="website_link" >Project Website</a></h2><h2><a href="https://github.com/PolyLogiX-Studio/Neos.js/discussions" target="_blank" class="menu-item" id="forum_link" >Discussions</a></h2><h2><a href="https://discord.gg/6y2A4Pk" target="_blank" class="menu-item" id="discord_link" >Discord</a></h2><h3>Classes</h3><ul><li><a href="AssetDiff.html">AssetDiff</a></li><li><a href="AssetEntry.html">AssetEntry</a></li><li><a href="AssetInfo.html">AssetInfo</a></li><li><a href="AssetMetadataRequest.html">AssetMetadataRequest</a><ul class='members'><li data-type='member' style='display: none;'><a href="AssetMetadataRequest.html#.MAX_BATCH_SIZE">MAX_BATCH_SIZE</a></li></ul></li><li><a href="AssetUploadData.html">AssetUploadData</a></li><li><a href="AssetUtil.html">AssetUtil</a><ul class='members'><li data-type='member' style='display: none;'><a href="AssetUtil.html#.COMPUTE_VERSION">COMPUTE_VERSION</a></li></ul><ul class='methods'><li data-type='method' style='display: none;'><a href="AssetUtil.html#.ComposeIdentifier">ComposeIdentifier</a></li><li data-type='method' style='display: none;'><a href="AssetUtil.html#.ExtractSignature">ExtractSignature</a></li><li data-type='method' style='display: none;'><a href="AssetUtil.html#.GenerateHashSignature">GenerateHashSignature</a></li><li data-type='method' style='display: none;'><a href="AssetUtil.html#.GenerateURL">GenerateURL</a></li><li data-type='method' style='display: none;'><a href="AssetUtil.html#.SplitIdentifier">SplitIdentifier</a></li></ul></li><li><a href="AssetVariantComputationTask.html">AssetVariantComputationTask</a></li><li><a href="AuthenticationHeaderValue.html">AuthenticationHeaderValue</a></li><li><a href="BatchQuery.html">BatchQuery</a><ul class='methods'><li data-type='method' style='display: none;'><a href="BatchQuery.html#BatchQuery">BatchQuery</a></li></ul></li><li><a href="CancellationTokenSource.html">CancellationTokenSource</a></li><li><a href="Char.html">Char</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Char.html#.IsLetterOrDigit">IsLetterOrDigit</a></li><li data-type='method' style='display: none;'><a href="Char.html#.IsWhiteSpace">IsWhiteSpace</a></li></ul></li><li><a href="CheckContactData.html">CheckContactData</a></li><li><a href="ChildRecordDiff.html">ChildRecordDiff</a></li><li><a href="CloudMessage.html">CloudMessage</a><ul class='methods'><li data-type='method' style='display: none;'><a href="CloudMessage.html#.ExtractMessage">ExtractMessage</a></li></ul></li><li><a href="CloudResult.html">CloudResult</a><ul class='methods'><li data-type='method' style='display: none;'><a href="CloudResult.html#CloudResult">CloudResult</a></li></ul></li><li><a href="CloudVariable.html">CloudVariable</a><ul class='methods'><li data-type='method' style='display: none;'><a href="CloudVariable.html#.GetDefinitionPath">GetDefinitionPath</a></li><li data-type='method' style='display: none;'><a href="CloudVariable.html#GetDefinitionPath">GetDefinitionPath</a></li></ul></li><li><a href="CloudVariableDefinition.html">CloudVariableDefinition</a><ul class='methods'><li data-type='method' style='display: none;'><a href="CloudVariableDefinition.html#CanRead">CanRead</a></li><li data-type='method' style='display: none;'><a href="CloudVariableDefinition.html#CanWrite">CanWrite</a></li></ul></li><li><a href="CloudXInterface.html">CloudXInterface</a><ul class='members'><li data-type='member' style='display: none;'><a href="CloudXInterface.html#.CLOUD_ENDPOINT">CLOUD_ENDPOINT</a></li><li data-type='member' style='display: none;'><a href="CloudXInterface.html#.CloudEndpoint">CloudEndpoint</a></li><li data-type='member' style='display: none;'><a href="CloudXInterface.html#.CLOUDX_NEOS_CDN">CLOUDX_NEOS_CDN</a></li><li data-type='member' style='display: none;'><a href="CloudXInterface.html#.CLOUDX_NEOS_DURABLE_BLOB">CLOUDX_NEOS_DURABLE_BLOB</a></li><li data-type='member' style='display: none;'><a href="CloudXInterface.html#.CLOUDX_NEOS_OPERATIONAL_BLOB">CLOUDX_NEOS_OPERATIONAL_BLOB</a></li><li data-type='member' style='display: none;'><a href="CloudXInterface.html#.CLOUDX_NEOS_VIDEO_CDN">CLOUDX_NEOS_VIDEO_CDN</a></li><li data-type='member' style='display: none;'><a href="CloudXInterface.html#.CLOUDX_PRODUCTION_NEOS_API">CLOUDX_PRODUCTION_NEOS_API</a></li><li data-type='member' style='display: none;'><a href="CloudXInterface.html#.CLOUDX_STAGING_NEOS_API">CLOUDX_STAGING_NEOS_API</a></li><li data-type='member' style='display: none;'><a href="CloudXInterface.html#.DEFAULT_RETRIES">DEFAULT_RETRIES</a></li><li data-type='member' style='display: none;'><a href="CloudXInterface.html#.DefaultTimeout">DefaultTimeout</a></li><li data-type='member' style='display: none;'><a href="CloudXInterface.html#.JSON_MEDIA_TYPE">JSON_MEDIA_TYPE</a></li><li data-type='member' style='display: none;'><a href="CloudXInterface.html#.LOCAL_NEOS_API">LOCAL_NEOS_API</a></li><li data-type='member' style='display: none;'><a href="CloudXInterface.html#.LOCAL_NEOS_BLOB">LOCAL_NEOS_BLOB</a></li><li data-type='member' style='display: none;'><a href="CloudXInterface.html#.MemoryStreamAllocator">MemoryStreamAllocator</a></li><li data-type='member' style='display: none;'><a href="CloudXInterface.html#.NEOS_API">NEOS_API</a></li><li data-type='member' style='display: none;'><a href="CloudXInterface.html#.NEOS_ASSETS">NEOS_ASSETS</a></li><li data-type='member' style='display: none;'><a href="CloudXInterface.html#.NEOS_ASSETS_CDN">NEOS_ASSETS_CDN</a></li><li data-type='member' style='display: none;'><a href="CloudXInterface.html#.NEOS_BLOB">NEOS_BLOB</a></li><li data-type='member' style='display: none;'><a href="CloudXInterface.html#.ProfilerBeginSampleCallback">ProfilerBeginSampleCallback</a></li><li data-type='member' style='display: none;'><a href="CloudXInterface.html#.ProfilerEndSampleCallback">ProfilerEndSampleCallback</a></li><li data-type='member' style='display: none;'><a href="CloudXInterface.html#.SESSION_EXTEND_INTERVAL">SESSION_EXTEND_INTERVAL</a></li><li data-type='member' style='display: none;'><a href="CloudXInterface.html#.storageUpdateDelays">storageUpdateDelays</a></li><li data-type='member' style='display: none;'><a href="CloudXInterface.html#.UPLOAD_DEGREE_OF_PARALLELISM">UPLOAD_DEGREE_OF_PARALLELISM</a></li><li data-type='member' style='display: none;'><a href="CloudXInterface.html#.USE_CDN">USE_CDN</a></li><li data-type='member' style='display: none;'><a href="CloudXInterface.html#cachedRecords">cachedRecords</a></li><li data-type='member' style='display: none;'><a href="CloudXInterface.html#CurrentSession">CurrentSession</a></li><li data-type='member' style='display: none;'><a href="CloudXInterface.html#CurrentUser">CurrentUser</a></li><li data-type='member' style='display: none;'><a href="CloudXInterface.html#CurrentUserGroupInfos">CurrentUserGroupInfos</a></li><li data-type='member' style='display: none;'><a href="CloudXInterface.html#CurrentUserMemberInfos">CurrentUserMemberInfos</a></li><li data-type='member' style='display: none;'><a href="CloudXInterface.html#CurrentUserMemberships">CurrentUserMemberships</a></li><li data-type='member' style='display: none;'><a href="CloudXInterface.html#Friends">Friends</a></li><li data-type='member' style='display: none;'><a href="CloudXInterface.html#Friends">Friends</a></li><li data-type='member' style='display: none;'><a href="CloudXInterface.html#GroupMemberUpdated">GroupMemberUpdated</a></li><li data-type='member' style='display: none;'><a href="CloudXInterface.html#GroupUpdated">GroupUpdated</a></li><li data-type='member' style='display: none;'><a href="CloudXInterface.html#HttpClient">HttpClient</a></li><li data-type='member' style='display: none;'><a href="CloudXInterface.html#HttpClient">HttpClient</a></li><li data-type='member' style='display: none;'><a href="CloudXInterface.html#LastLocalServerResponse">LastLocalServerResponse</a></li><li data-type='member' style='display: none;'><a href="CloudXInterface.html#LastServerStateFetch">LastServerStateFetch</a></li><li data-type='member' style='display: none;'><a href="CloudXInterface.html#lastServerStatsUpdate">lastServerStatsUpdate</a></li><li data-type='member' style='display: none;'><a href="CloudXInterface.html#LastServerUpdate">LastServerUpdate</a></li><li data-type='member' style='display: none;'><a href="CloudXInterface.html#MembershipsUpdated">MembershipsUpdated</a></li><li data-type='member' style='display: none;'><a href="CloudXInterface.html#Messages">Messages</a></li><li data-type='member' style='display: none;'><a href="CloudXInterface.html#Messages">Messages</a></li><li data-type='member' style='display: none;'><a href="CloudXInterface.html#PublicKey">PublicKey</a></li><li data-type='member' style='display: none;'><a href="CloudXInterface.html#ServerResponseTime">ServerResponseTime</a></li><li data-type='member' style='display: none;'><a href="CloudXInterface.html#ServerStatus">ServerStatus</a></li><li data-type='member' style='display: none;'><a href="CloudXInterface.html#SessionChanged">SessionChanged</a></li><li data-type='member' style='display: none;'><a href="CloudXInterface.html#Transactions">Transactions</a></li><li data-type='member' style='display: none;'><a href="CloudXInterface.html#Transactions">Transactions</a></li><li data-type='member' style='display: none;'><a href="CloudXInterface.html#UserAgent">UserAgent</a></li><li data-type='member' style='display: none;'><a href="CloudXInterface.html#UserAgentProduct">UserAgentProduct</a></li><li data-type='member' style='display: none;'><a href="CloudXInterface.html#UserAgentVersion">UserAgentVersion</a></li><li data-type='member' style='display: none;'><a href="CloudXInterface.html#UserUpdated">UserUpdated</a></li></ul><ul class='methods'><li data-type='method' style='display: none;'><a href="CloudXInterface.html#.FilterNeosURL">FilterNeosURL</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#.IsLegacyNeosDB">IsLegacyNeosDB</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#.IsValidNeosDBUri">IsValidNeosDBUri</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#.NeosDBFilename">NeosDBFilename</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#.NeosDBQuery">NeosDBQuery</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#.NeosDBSignature">NeosDBSignature</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#.NeosDBToHttp">NeosDBToHttp</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#.NeosThumbnailIdToHttp">NeosThumbnailIdToHttp</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#.TryFromString">TryFromString</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#AddBody">AddBody</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#AddMembership">AddMembership</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#ClearMemberships">ClearMemberships</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#CloudXInterface">CloudXInterface</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#CreateNeosSession">CreateNeosSession</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#CreateRequest">CreateRequest</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#DELETE">DELETE</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#DeleteFriend">DeleteFriend</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#DeleteGroupMember">DeleteGroupMember</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#ExtendSession">ExtendSession</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#FetchRecordCached">FetchRecordCached</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#FindRecords">FindRecords</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#GET">GET</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#GetCurrencyRates">GetCurrencyRates</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#GetFriends">GetFriends</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#GetGroup">GetGroup</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#GetGroupMember">GetGroupMember</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#GetGroupMembers">GetGroupMembers</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#GetMessageHistory">GetMessageHistory</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#GetMessages">GetMessages</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#GetOnlineUserCount">GetOnlineUserCount</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#GetOnlineUserStats">GetOnlineUserStats</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#GetRandomExitMessage">GetRandomExitMessage</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#GetRecords">GetRecords</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#GetServerStatistics">GetServerStatistics</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#GetSession">GetSession</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#GetSessions">GetSessions</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#GetStatus">GetStatus</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#GetUnreadMessages">GetUnreadMessages</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#HasPotentialAccess">HasPotentialAccess</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#IsCurrentUserMemberOfGroup">IsCurrentUserMemberOfGroup</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#Login">Login</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#LogVisit">LogVisit</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#MarkMessagesRead">MarkMessagesRead</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#OnDebug">OnDebug</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#OnError">OnError</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#OnLogin">OnLogin</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#OnLogout">OnLogout</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#OnSessionUpdated">OnSessionUpdated</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#PATCH">PATCH</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#PatchNeosSession">PatchNeosSession</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#Ping">Ping</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#POST">POST</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#ProfilerBeginSample">ProfilerBeginSample</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#ProfilerEndSample">ProfilerEndSample</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#PUT">PUT</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#Register">Register</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#RequestRecoveryCode">RequestRecoveryCode</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#RunMembershipsUpdated">RunMembershipsUpdated</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#RunRequest">RunRequest</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#SendMessage">SendMessage</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#SetMemberships">SetMemberships</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#TryGetCurrentUserGroupInfo">TryGetCurrentUserGroupInfo</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#TryGetCurrentUserGroupMemberInfo">TryGetCurrentUserGroupMemberInfo</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#TryGetCurrentUserGroupMembership">TryGetCurrentUserGroupMembership</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#Update">Update</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#UpdateGroupInfo">UpdateGroupInfo</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#UpdateProfile">UpdateProfile</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#UpdateSessions">UpdateSessions</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#UpdateStatus">UpdateStatus</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#UpsertFriend">UpsertFriend</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#UpsertVariableDefinition">UpsertVariableDefinition</a></li><li data-type='method' style='display: none;'><a href="CloudXInterface.html#WriteVariable">WriteVariable</a></li></ul></li><li><a href="CreditTransaction.CreditTransaction.html">CreditTransaction</a></li><li><a href="CurrencyRates.html">CurrencyRates</a></li><li><a href="Dictionary.html">Dictionary</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Dictionary.html#Add">Add</a></li><li data-type='method' style='display: none;'><a href="Dictionary.html#AddOrUpdate">AddOrUpdate</a></li><li data-type='method' style='display: none;'><a href="Dictionary.html#Clear">Clear</a></li><li data-type='method' style='display: none;'><a href="Dictionary.html#ContainsKey">ContainsKey</a></li><li data-type='method' style='display: none;'><a href="Dictionary.html#ContainsValue">ContainsValue</a></li><li data-type='method' style='display: none;'><a href="Dictionary.html#EnsureCapacity">EnsureCapacity</a></li><li data-type='method' style='display: none;'><a href="Dictionary.html#Get">Get</a></li><li data-type='method' style='display: none;'><a href="Dictionary.html#Reduce">Reduce</a></li><li data-type='method' style='display: none;'><a href="Dictionary.html#Remove">Remove</a></li><li data-type='method' style='display: none;'><a href="Dictionary.html#RemoveAt">RemoveAt</a></li><li data-type='method' style='display: none;'><a href="Dictionary.html#Replace">Replace</a></li><li data-type='method' style='display: none;'><a href="Dictionary.html#TryAdd">TryAdd</a></li><li data-type='method' style='display: none;'><a href="Dictionary.html#TryGetValue">TryGetValue</a></li><li data-type='method' style='display: none;'><a href="Dictionary.html#TryRemove">TryRemove</a></li></ul></li><li><a href="Enumerable.html">Enumerable</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Enumerable.html#GetValue">GetValue</a></li></ul></li><li><a href="ExternalQueueObject.ExternalQueueObject.html">ExternalQueueObject</a></li><li><a href="Friend.html">Friend</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Friend.html#IsSame">IsSame</a></li></ul></li><li><a href="Friend.Friend.html">Friend</a></li><li><a href="FriendManager.html">FriendManager</a><ul class='methods'><li data-type='method' style='display: none;'><a href="FriendManager.html#AddedOrUpdated">AddedOrUpdated</a></li><li data-type='method' style='display: none;'><a href="FriendManager.html#AddFriend">AddFriend</a></li><li data-type='method' style='display: none;'><a href="FriendManager.html#CountPresentFriends">CountPresentFriends</a></li><li data-type='method' style='display: none;'><a href="FriendManager.html#ForeachFriend">ForeachFriend</a></li><li data-type='method' style='display: none;'><a href="FriendManager.html#FriendManager">FriendManager</a></li><li data-type='method' style='display: none;'><a href="FriendManager.html#GetFriend">GetFriend</a></li><li data-type='method' style='display: none;'><a href="FriendManager.html#GetFriends">GetFriends</a></li><li data-type='method' style='display: none;'><a href="FriendManager.html#GetFriendSessions">GetFriendSessions</a></li><li data-type='method' style='display: none;'><a href="FriendManager.html#Removed">Removed</a></li></ul></li><li><a href="HashSet.html">HashSet</a><ul class='methods'><li data-type='method' style='display: none;'><a href="HashSet.html#Add">Add</a></li><li data-type='method' style='display: none;'><a href="HashSet.html#AddRange">AddRange</a></li><li data-type='method' style='display: none;'><a href="HashSet.html#Any">Any</a></li><li data-type='method' style='display: none;'><a href="HashSet.html#Clear">Clear</a></li><li data-type='method' style='display: none;'><a href="HashSet.html#Contains">Contains</a></li><li data-type='method' style='display: none;'><a href="HashSet.html#Exists">Exists</a></li><li data-type='method' style='display: none;'><a href="HashSet.html#Find">Find</a></li><li data-type='method' style='display: none;'><a href="HashSet.html#ForEach">ForEach</a></li><li data-type='method' style='display: none;'><a href="HashSet.html#Remove">Remove</a></li><li data-type='method' style='display: none;'><a href="HashSet.html#RemoveAt">RemoveAt</a></li><li data-type='method' style='display: none;'><a href="HashSet.html#Sort">Sort</a></li><li data-type='method' style='display: none;'><a href="HashSet.html#TakeRandom">TakeRandom</a></li><li data-type='method' style='display: none;'><a href="HashSet.html#ToArray">ToArray</a></li><li data-type='method' style='display: none;'><a href="HashSet.html#TryGetValue">TryGetValue</a></li></ul></li><li><a href="HashSet.HashSet.html">HashSet</a></li><li><a href="HTTP_CLIENT.html">HTTP_CLIENT</a><ul class='methods'><li data-type='method' style='display: none;'><a href="HTTP_CLIENT.html#SendAsync">SendAsync</a></li></ul></li><li><a href="HttpRequestMessage.html">HttpRequestMessage</a></li><li><a href="HttpResponseMessage.html">HttpResponseMessage</a></li><li><a href="HubPatreons.html">HubPatreons</a></li><li><a href="HubPatreons.HubPatreons.html">HubPatreons</a></li><li><a href="IdUtil.html">IdUtil</a><ul class='methods'><li data-type='method' style='display: none;'><a href="IdUtil.html#.GenerateId">GenerateId</a></li><li data-type='method' style='display: none;'><a href="IdUtil.html#.GetOwnerType">GetOwnerType</a></li></ul></li><li><a href="License.License.html">License</a></li><li><a href="List.html">List</a><ul class='methods'><li data-type='method' style='display: none;'><a href="List.html#.ToList">ToList</a></li><li data-type='method' style='display: none;'><a href="List.html#Add">Add</a></li><li data-type='method' style='display: none;'><a href="List.html#AddRange">AddRange</a></li><li data-type='method' style='display: none;'><a href="List.html#Any">Any</a></li><li data-type='method' style='display: none;'><a href="List.html#Clear">Clear</a></li><li data-type='method' style='display: none;'><a href="List.html#Contains">Contains</a></li><li data-type='method' style='display: none;'><a href="List.html#Exists">Exists</a></li><li data-type='method' style='display: none;'><a href="List.html#Find">Find</a></li><li data-type='method' style='display: none;'><a href="List.html#ForEach">ForEach</a></li><li data-type='method' style='display: none;'><a href="List.html#Remove">Remove</a></li><li data-type='method' style='display: none;'><a href="List.html#RemoveAt">RemoveAt</a></li><li data-type='method' style='display: none;'><a href="List.html#Sort">Sort</a></li><li data-type='method' style='display: none;'><a href="List.html#TakeRandom">TakeRandom</a></li><li data-type='method' style='display: none;'><a href="List.html#ToArray">ToArray</a></li><li data-type='method' style='display: none;'><a href="List.html#TryGetValue">TryGetValue</a></li></ul></li><li><a href="LoginCredentials.LoginCredentials.html">LoginCredentials</a></li><li><a href="MessageManager.html">MessageManager</a><ul class='methods'><li data-type='method' style='display: none;'><a href="MessageManager.html#GetAllUserMessages">GetAllUserMessages</a></li></ul></li><li><a href="Neos.html">Neos</a><ul class='members'><li data-type='member' style='display: none;'><a href="Neos.html#.CloudX">CloudX</a></li><li data-type='member' style='display: none;'><a href="Neos.html#CurrentSession">CurrentSession</a></li><li data-type='member' style='display: none;'><a href="Neos.html#CurrentUser">CurrentUser</a></li><li data-type='member' style='display: none;'><a href="Neos.html#CurrentUserGroupInfos">CurrentUserGroupInfos</a></li><li data-type='member' style='display: none;'><a href="Neos.html#CurrentUserMemberships">CurrentUserMemberships</a></li></ul><ul class='methods'><li data-type='method' style='display: none;'><a href="Neos.html#AddFriend">AddFriend</a></li><li data-type='method' style='display: none;'><a href="Neos.html#CountPresentFriends">CountPresentFriends</a></li><li data-type='method' style='display: none;'><a href="Neos.html#FetchRecord">FetchRecord</a></li><li data-type='method' style='display: none;'><a href="Neos.html#FindRecords">FindRecords</a></li><li data-type='method' style='display: none;'><a href="Neos.html#GetAllUserMessages">GetAllUserMessages</a></li><li data-type='method' style='display: none;'><a href="Neos.html#GetCurrencyRates">GetCurrencyRates</a></li><li data-type='method' style='display: none;'><a href="Neos.html#GetFriend">GetFriend</a></li><li data-type='method' style='display: none;'><a href="Neos.html#GetFriends">GetFriends</a></li><li data-type='method' style='display: none;'><a href="Neos.html#GetGroup">GetGroup</a></li><li data-type='method' style='display: none;'><a href="Neos.html#GetGroupMember">GetGroupMember</a></li><li data-type='method' style='display: none;'><a href="Neos.html#GetGroupMembers">GetGroupMembers</a></li><li data-type='method' style='display: none;'><a href="Neos.html#GetMessageHistory">GetMessageHistory</a></li><li data-type='method' style='display: none;'><a href="Neos.html#GetMessages">GetMessages</a></li><li data-type='method' style='display: none;'><a href="Neos.html#GetRandomExitMessage">GetRandomExitMessage</a></li><li data-type='method' style='display: none;'><a href="Neos.html#GetStatus">GetStatus</a></li><li data-type='method' style='display: none;'><a href="Neos.html#GetUser">GetUser</a></li><li data-type='method' style='display: none;'><a href="Neos.html#GetUserByName">GetUserByName</a></li><li data-type='method' style='display: none;'><a href="Neos.html#GetUserMessages">GetUserMessages</a></li><li data-type='method' style='display: none;'><a href="Neos.html#GetUsers">GetUsers</a></li><li data-type='method' style='display: none;'><a href="Neos.html#IgnoreRequest">IgnoreRequest</a></li><li data-type='method' style='display: none;'><a href="Neos.html#IsFriend">IsFriend</a></li><li data-type='method' style='display: none;'><a href="Neos.html#Login">Login</a></li><li data-type='method' style='display: none;'><a href="Neos.html#Logout">Logout</a></li><li data-type='method' style='display: none;'><a href="Neos.html#MarkMessagesRead">MarkMessagesRead</a></li><li data-type='method' style='display: none;'><a href="Neos.html#NeosDBToHttp">NeosDBToHttp</a></li><li data-type='method' style='display: none;'><a href="Neos.html#RemoveFriend">RemoveFriend</a></li><li data-type='method' style='display: none;'><a href="Neos.html#SendTextMessage">SendTextMessage</a></li><li data-type='method' style='display: none;'><a href="Neos.html#SendTransaction">SendTransaction</a></li><li data-type='method' style='display: none;'><a href="Neos.html#UpdateStatus">UpdateStatus</a></li></ul></li><li><a href="NeosDBAsset.NeosDBAsset.html">NeosDBAsset</a></li><li><a href="Out.html">Out</a></li><li><a href="Path.html">Path</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Path.html#.GetExtension">GetExtension</a></li><li data-type='method' style='display: none;'><a href="Path.html#.GetFileNameWithoutExtension">GetFileNameWithoutExtension</a></li></ul></li><li><a href="PicturePatreon.PicturePatreon.html">PicturePatreon</a></li><li><a href="RecordId.RecordId.html">RecordId</a></li><li><a href="RecordInfo.RecordInfo.html">RecordInfo</a></li><li><a href="RecordPreprocessStatus.RecordPreprocessStatus.html">RecordPreprocessStatus</a></li><li><a href="RecordTags.html">RecordTags</a><ul class='members'><li data-type='member' style='display: none;'><a href="RecordTags.html#.AudioClip">AudioClip</a></li><li data-type='member' style='display: none;'><a href="RecordTags.html#.CommonAvatar">CommonAvatar</a></li><li data-type='member' style='display: none;'><a href="RecordTags.html#.Facet">Facet</a></li><li data-type='member' style='display: none;'><a href="RecordTags.html#.IGNORE_TAGS">IGNORE_TAGS</a></li><li data-type='member' style='display: none;'><a href="RecordTags.html#.InteractiveCamera">InteractiveCamera</a></li><li data-type='member' style='display: none;'><a href="RecordTags.html#.MessageItem">MessageItem</a></li><li data-type='member' style='display: none;'><a href="RecordTags.html#.Photo">Photo</a></li><li data-type='member' style='display: none;'><a href="RecordTags.html#.Photo360">Photo360</a></li><li data-type='member' style='display: none;'><a href="RecordTags.html#.PhotoStereo">PhotoStereo</a></li><li data-type='member' style='display: none;'><a href="RecordTags.html#.ProfileIcon">ProfileIcon</a></li><li data-type='member' style='display: none;'><a href="RecordTags.html#.RawFile">RawFile</a></li><li data-type='member' style='display: none;'><a href="RecordTags.html#.VideoClip">VideoClip</a></li><li data-type='member' style='display: none;'><a href="RecordTags.html#.VirtualKeyboard">VirtualKeyboard</a></li><li data-type='member' style='display: none;'><a href="RecordTags.html#.VRPhoto">VRPhoto</a></li><li data-type='member' style='display: none;'><a href="RecordTags.html#.WorldOrb">WorldOrb</a></li></ul><ul class='methods'><li data-type='method' style='display: none;'><a href="RecordTags.html#.ClipAsset">ClipAsset</a></li><li data-type='method' style='display: none;'><a href="RecordTags.html#.ClipLength">ClipLength</a></li><li data-type='method' style='display: none;'><a href="RecordTags.html#.CorrespondingMessageId">CorrespondingMessageId</a></li><li data-type='method' style='display: none;'><a href="RecordTags.html#.CorrespondingWorldUrl">CorrespondingWorldUrl</a></li><li data-type='method' style='display: none;'><a href="RecordTags.html#.ExtractTag">ExtractTag</a></li><li data-type='method' style='display: none;'><a href="RecordTags.html#.ExtractValue">ExtractValue</a></li><li data-type='method' style='display: none;'><a href="RecordTags.html#.GenerateTagsFromName">GenerateTagsFromName</a></li><li data-type='method' style='display: none;'><a href="RecordTags.html#.GetCorrespondingMessageId">GetCorrespondingMessageId</a></li><li data-type='method' style='display: none;'><a href="RecordTags.html#.GetCorrespondingWorldrl">GetCorrespondingWorldrl</a></li><li data-type='method' style='display: none;'><a href="RecordTags.html#.LocationAccessLevel">LocationAccessLevel</a></li><li data-type='method' style='display: none;'><a href="RecordTags.html#.LocationHiddenFromListing">LocationHiddenFromListing</a></li><li data-type='method' style='display: none;'><a href="RecordTags.html#.LocationHost">LocationHost</a></li><li data-type='method' style='display: none;'><a href="RecordTags.html#.LocationName">LocationName</a></li><li data-type='method' style='display: none;'><a href="RecordTags.html#.PresentUser">PresentUser</a></li><li data-type='method' style='display: none;'><a href="RecordTags.html#.RawFileAsset">RawFileAsset</a></li><li data-type='method' style='display: none;'><a href="RecordTags.html#.TextureAsset">TextureAsset</a></li><li data-type='method' style='display: none;'><a href="RecordTags.html#.TimeStamp">TimeStamp</a></li></ul></li><li><a href="RecordUtil.html">RecordUtil</a><ul class='methods'><li data-type='method' style='display: none;'><a href="RecordUtil.html#.ExtractRecordID">ExtractRecordID</a></li><li data-type='method' style='display: none;'><a href="RecordUtil.html#.ExtractRecordPath">ExtractRecordPath</a></li><li data-type='method' style='display: none;'><a href="RecordUtil.html#.GenerateUri">GenerateUri</a></li><li data-type='method' style='display: none;'><a href="RecordUtil.html#.IsValidRecordID">IsValidRecordID</a></li></ul></li><li><a href="RSAParametersData.html#.RSAParametersData">RSAParametersData</a></li><li><a href="ServerStatistics.ServerStatistics.html">ServerStatistics</a></li><li><a href="SessionInfo.SessionInfo.html">SessionInfo</a></li><li><a href="SessionUpdate.html">SessionUpdate</a></li><li><a href="SessionUpdate.SessionUpdate.html">SessionUpdate</a></li><li><a href="StringBuilder.html">StringBuilder</a><ul class='methods'><li data-type='method' style='display: none;'><a href="StringBuilder.html#Append">Append</a></li><li data-type='method' style='display: none;'><a href="StringBuilder.html#Clear">Clear</a></li><li data-type='method' style='display: none;'><a href="StringBuilder.html#Insert">Insert</a></li><li data-type='method' style='display: none;'><a href="StringBuilder.html#Remove">Remove</a></li><li data-type='method' style='display: none;'><a href="StringBuilder.html#Set">Set</a></li><li data-type='method' style='display: none;'><a href="StringBuilder.html#ToString">ToString</a></li></ul></li><li><a href="ThumbnailInfo.ThumbnailInfo.html">ThumbnailInfo</a></li><li><a href="TimeSpan.html">TimeSpan</a><ul class='methods'><li data-type='method' style='display: none;'><a href="TimeSpan.html#.Delay">Delay</a></li></ul></li><li><a href="TransactionManager.html">TransactionManager</a></li><li><a href="TransactionMessage.TransactionMessage.html">TransactionMessage</a></li><li><a href="Uri.html">Uri</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Uri.html#.EscapeDataString">EscapeDataString</a></li></ul></li><li><a href="User.html">User</a></li></ul><h3>Events</h3><ul><li><a href="Neos.html#event:debug">debug</a></li><li><a href="Neos.html#event:error">error</a></li><li><a href="Neos.html#event:friendAdded">friendAdded</a></li><li><a href="Neos.html#event:friendRemoved">friendRemoved</a></li><li><a href="Neos.html#event:friendRequestCountChanged">friendRequestCountChanged</a></li><li><a href="Neos.html#event:friendsChanged">friendsChanged</a></li><li><a href="Neos.html#event:friendUpdated">friendUpdated</a></li><li><a href="Neos.html#event:groupMemberUpdated">groupMemberUpdated</a></li><li><a href="Neos.html#event:groupUpdated">groupUpdated</a></li><li><a href="Neos.html#event:login">login</a></li><li><a href="Neos.html#event:logout">logout</a></li><li><a href="Neos.html#event:membershipsUpdated">membershipsUpdated</a></li><li><a href="Neos.html#event:messageCountChanged">messageCountChanged</a></li><li><a href="Neos.html#event:messageReceived">messageReceived</a></li><li><a href="Neos.html#event:sessionChanged">sessionChanged</a></li><li><a href="Neos.html#event:sessionUpdated">sessionUpdated</a></li><li><a href="Neos.html#event:userUpdated">userUpdated</a></li></ul><h3>Global</h3><ul><li><a href="global.html#AccountType">AccountType</a></li><li><a href="global.html#AssetDiffEnum">AssetDiffEnum</a></li><li><a href="global.html#AssetVariantEntityType">AssetVariantEntityType</a></li><li><a href="global.html#HttpMethod">HttpMethod</a></li><li><a href="global.html#NeosGeneratorOptions">NeosGeneratorOptions</a></li><li><a href="global.html#OnlineStatus">OnlineStatus</a></li><li><a href="global.html#UploadState">UploadState</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">API/MessageManager.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const { Message } = require("./Message");
const { MessageType } = require("./MessageType");
const { TransactionMessage } = require("./TransactionMessage");
const { Dictionary } = require("./Dictionary");
const { List } = require("./List");
const { HashSet } = require("./HashSet");
const { Out } = require("./Out");
/**
 * @class MessageManager
 */
class MessageManager {
	constructor(cloud) {
		this.lastRequest = new Date(0);
		this.lastUnreadMessage = new Date(0);
		this.UnreadMessageCountChanged = null;
		this.InitialmessagesFetched = new Boolean();
		this.UnreadCountByUser = new Dictionary();
		this.UnreadCount = 0;
		this.TotalUnreadCount = 0;
		Object.defineProperties(this, {
			_messagesLock: {
				value: new Object(),
				writable: false,
			},
			Cloud: {
				value: cloud,
				enumerable: false,
				writable: true,
			},
			_messages: {
				value: new Dictionary(),
				writable: true,
			},
			_unreadCountDirty: {
				value: false,
				writable: true,
			},
			_waitingForRequest: {
				value: false,
				writable: true,
			},
		});
	}
	static get UPDATE_PERIOD_SECONDS() {
		return 1;
	}
	static get UPDATE_TIMEOUT_SECONDS() {
		return 30;
	}

	static get MAX_READ_HISTORY() {
		return 100;
	}
	static get MAX_UNREAD_HISTORY() {
		return 200;
	}
	MessageManager(cloud) {
		Object.defineProperties(this, {
			Cloud: {
				value: cloud,
				enumerable: false,
				writable: true,
			},
		});
	}

	Update() {
		if (this.Cloud.CurrentUser == null) return;
		if (this._unreadCountDirty) {
			this._unreadCountDirty = false;
			this.TotalUnreadCount = this._messages.Reduce((p, m) => {
				return p + m.Value.UnreadCount;
			}, 0);
			for (let m of this._messages) {
				if (m.Value.UnreadCount === 0)
					this.UnreadCountByUser.TryRemove(m.Key, []);
				else
					this.UnreadCountByUser.AddOrUpdate(
						m.Key,
						m.Value.UnreadCount,
						() => m.Value.UnreadCount
					);
			}
			let messageCountChanged = this.UnreadMessageCountChanged;
			if (messageCountChanged != null)
				messageCountChanged(this.TotalUnreadCount);
		}
		if (
			new Date(new Date() - this.lastRequest).getTime() / 1000 &lt;
			(this._waitingForRequest
				? MessageManager.UPDATE_TIMEOUT_SECONDS
				: MessageManager.UPDATE_PERIOD_SECONDS)
		)
			return;
		this.lastRequest = new Date();
		this._waitingForRequest = true;
		(async () => {
			//Async Task
			var cloudresult1 = await this.Cloud.GetUnreadMessages(
				this.lastUnreadMessage
			);
			this._waitingForRequest = false; //Async Limiting Tomfoolery
			if (cloudresult1.IsError) return; //Bad Request
			var hashSet = new HashSet();
			for (let message of cloudresult1.Entity) {
				this.lastUnreadMessage =
					this.lastUnreadMessage != null
						? new Date(Math.max(this.lastUnreadMessage, message.LastUpdateTime))
						: new Date(message.LastUpdateTime);
				if (!this.GetUserMessages(message.SenderId).AddMessage(message)) {
					hashSet.Add(message);
				}
			}
			let flag1 = false;

			for (let message of cloudresult1.Entity) {
				if (!hashSet.Contains(message)) {
					if (
						this.InitialMessagesFetched &amp;&amp;
						message.MessageType == MessageType.CreditTransfer
					) {
						let content = message.ExtractContent();
						let flag2 = content.RecepientId == this.Cloud.CurrentUser.Id;
						let currentUser = this.Cloud.CurrentUser;
						if (
							currentUser.Credits != null &amp;&amp;
							currentUser.Credits.ContainsKey(content.Token)
						)
							currentUser.Credits.AddOrUpdate(
								content.Token,
								flag2 ? content.Amount : -content.Amount,
								(key, value) =>
									flag2 ? value + content.Amount : value - content.Amount
							);
						flag1 = true;
					}
					let onMessageReceived = this.OnMessageReceived;
					if (onMessageReceived != null) {
						onMessageReceived(message);
					}

					let friend = this.Cloud.Friends.GetFriend(message.SenderId);
					if (friend != null)
						friend.LatestMessageTime = Math.max(new Date(), message.SendTime);
				}
			}
			this.MarkUnreadCountDirty();
			this.InitialmessagesFetched = true;
			if (!flag1) return;
			await setTimeout(async () => {
				await this.Cloud.UpdateCurrentUserInfo();
			}, 10000);
		})();
	}
	MarkUnreadCountDirty() {
		Object.defineProperties(this, {
			_unreadCountDirty: {
				value: true,
				writable: true,
			},
		});
	}
	Reset() {
		Object.defineProperties(this, {
			_messages: {
				value: new Dictionary(),
				writable: true,
			},
		});
		this.lastUnreadMessage = new Date(0);
		this.InitialmessagesFetched = false;
	}
	GetUserMessages(userId) {
		let usermessages1 = new Out();
		if (this._messages.TryGetValue(userId, usermessages1)) {
			return usermessages1.Out;
		}
		let usermessages2 = new MessageManager.UserMessages();
		usermessages2.UserMessages(userId, this);
		this._messages.Add(userId, usermessages2);
		return usermessages2;
	}

	/**
	 *
	 *
	 * @param {List} list
	 * @memberof MessageManager
	 */
	GetAllUserMessages(list) {
		for (let message of this._messages) {
			list.push(message.Value);
		}
	}
	//event OnMessageReceived
	//event UnreadMessageCounrChange
	static get UserMessages() {
		return class {
			constructor() {
				this.UserId = new String();
				this.UnreadCount = 0;
				this.Messages = new List();
				Object.defineProperties(this, {
					_messageIds: {
						value: new List(),
						writable: false,
					},
					_lock: {
						value: "MessageManager.UserMessages._lock",
						writable: false,
					},
					_historyLoadTask: {
						value: () => {},
						writable: true,
					},
					_historyLoaded: {
						value: false,
						writable: true,
					},
				});
			}
			get CloudXInterface() {
				return this.Manager.Cloud;
			}
			UserMessages(userId, manager) {
				this.UserId = userId;
				Object.defineProperties(this, {
					Manager: {
						value: manager,
						writable: true,
						enumerable: false,
					},
				});
			}
			MarkAllRead() {
				let ids = null;
				if (this.UnreadCount === 0) return;
				ids = new Array();
				for (let message of this.Messages) {
					if (!message.IsSent &amp;&amp; !(message.ReadTime != null)) {
						message.ReadTime = new Date();
						ids.push(message.Id);
					}
				}
				this.UnreadCount = 0;
				(async () => {
					await this.Manager.Cloud.MarkMessagesRead(ids);
				})();
				this.Manager.MarkUnreadCountDirty();
			}
			CreateTextMessage(text) {
				let message = new Message();
				message.MessageType = "Text";
				message.Content = text;
				return message;
			}
			CreateInviteMessage(sessionInfo) {
				let message = new Message();
				message.Id = Message.GenerateId();
				message.SendTime = new Date();
				message.MessageType = "SessionInvite";
				message.SetContent(sessionInfo);
				return message;
			}
			async SendInviteMessage(sessionInfo) {
				return await this.SendMessage(this.CreateInviteMessage(sessionInfo));
			}
			AddSentTransactionMessage(token, amount, comment) {
				let message = new Message();
				message.Id = Message.GenerateId();
				message.OwnerId = this.Manager.Cloud.CurrentUser.Id;
				message.RecipientId = this.UserId;
				message.SenderId = message.OwnerId;
				message.SendTime = new Date();
				message.MessageType = MessageType.CreditTransfer;
				let _transaction = new TransactionMessage();
				_transaction.Token = token;
				_transaction.Amount = amount;
				_transaction.Comment = comment;
				_transaction.RecipientId = this.UserId;
				message.SetContent(_transaction);
				this.Messages.push(message);
				return message;
			}
			async SendMessage(message) {
				if (message.Id == null) message.Id = Message.GenerateId();
				message.RecipientId = this.UserId;
				message.SenderId = this.CloudXInterface.CurrentUser.Id;
				message.OwnerId = message.SenderId;
				message.SendTime = new Date();
				this.Messages.push(message);
				let friend = this.Manager.Cloud.Friends.GetFriend(message.RecipientId);
				if (friend != null) friend.LatestMessageTime = new Date();
				return await this.Manager.Cloud.SendMessage(message);
			}
			async SendTextMessage(text) {
				return await this.SendMessage(this.CreateTextMessage(text));
			}
			async EnsureHistory() {
				if (this._historyLoaded) return;
				let isFirstRequest = false;
				if (this._historyLoaded) return;
				if (this._historyLoadTask == null) {
					isFirstRequest = true;
					this._historyLoadTask = this.Manager.Cloud.GetMessageHistory(
						this.UserId,
						MessageManager.MAX_READ_HISTORY
					);
				}
				let cloudResult = await this._historyLoadTask;
				if (!isFirstRequest) return;
				if (cloudResult.IsError) {
					this._historyLoadTask = null;
				} else {
					this.Messages = cloudResult.Entity;
					this.Messages.reverse();
					this.UnreadCount = this.Messages.filter(
						(m) => !(m.ReadTime != null)
					).length;
					this._historyLoaded = true;
				}
			}
			AddMessage(message) {
				if (this._messageIds.includes(message.Id)) {
					return false;
				}
				this.Messages.Add(message);
				this._messageIds.Add(message.Id);
				if (message.IsReceived &amp;&amp; !(message.ReadTime != null))
					++this.UnreadCount;
				while (
					this.Messages.length > MessageManager.MAX_UNREAD_HISTORY ||
					(this.Messages.length > MessageManager.MAX_UNREAD_HISTORY &amp;&amp;
						(this.Messages[0].IsSent || this.Messages[0].ReadTime != null))
				) {
					this._messageIds.Remove(this.Messages[0].Id);
					this.Messages.RemoveAt(0);
				}
				return true;
			}
			GetMessages(messages) {
				messages.AddRange(this.Messages);
			}
		};
	}
}
module.exports = {
	MessageManager,
};
</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.6</a> on Mon Feb 01 2021 17:53:17 GMT-0500 (Eastern Standard Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/search.js" defer></script>


<script src="scripts/collapse.js" defer></script>


</body>
</html>
